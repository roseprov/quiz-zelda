var __awaiter=this&&this.__awaiter||function(e,t,s,i){return new(s||(s=Promise))(function(r,n){function o(e){try{a(i.next(e))}catch(e){n(e)}}function c(e){try{a(i.throw(e))}catch(e){n(e)}}function a(e){e.done?r(e.value):new s(function(t){t(e.value)}).then(o,c)}a((i=i.apply(e,t||[])).next())})};define(["require","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Quiz=class{constructor(){this.questionActive=1,this.questionsReussi=0,this.pointage=0,this.Q1=document.getElementById("Q1"),this.Q2=document.getElementById("Q2"),this.Q3=document.getElementById("Q3"),this.refArrChoixQ1=Array.apply(null,document.querySelectorAll("[name=Q1]")),this.refArrChoixQ2=Array.apply(null,document.querySelectorAll("[name=Q2]")),this.refArrChoixQ3=Array.apply(null,document.querySelectorAll("[name=Q3]")),this.btnValiderQuiz=document.getElementById("validerQuiz"),this.getJSON(),this.initialiser();for(let e=0;e<this.refArrChoixQ1.length;e++)this.refArrChoixQ1[e].addEventListener("click",this.validerChoixReponseQ1.bind(this));for(let e=0;e<this.refArrChoixQ2.length;e++)this.refArrChoixQ2[e].addEventListener("click",this.validerChoixReponseQ2.bind(this));for(let e=0;e<this.refArrChoixQ3.length;e++)this.refArrChoixQ3[e].addEventListener("click",this.validerChoixReponseQ3.bind(this))}getJSON(){return __awaiter(this,void 0,void 0,function*(){try{let e=yield fetch("assets/js/objJSONquiz.json"),t=yield e.json();this.objJSONQuiz=t}catch(e){}})}initialiser(){this.Q2.style.display="none",this.Q3.style.display="none",this.afficherQuestion(this.questionActive),this.btnValiderQuiz.style.display="none"}afficherQuestion(e){document.getElementById("Q"+e).style.display="block",document.querySelector(".indicateurQuestion").innerHTML="Question "+e+" de 3"}cacherQuestion(e){document.getElementById("Q"+e).style.display="none"}cliquerBoutonSoumettreMesChoix(e){this.cacherQuestion(this.questionActive),this.afficherResultatsFinaux(e)}cliquerBoutonProchaineQuestion(e){this.cacherQuestion(this.questionActive),this.questionActive++,this.afficherQuestion(this.questionActive)}afficherResultatsFinaux(e){const t=document.querySelector(".sectionResultats");t.parentElement.querySelector(".zonePointage").remove(),t.parentElement.querySelector(".indicateurQuestion").remove(),t.innerHTML=`<div class="pageResultats">\n                <div class="containerResultats">\n                    <h1 hidden>Résultats</h1>\n                    <p class="titreResultat">Vous avez terminé le quiz!</p>\n                    <div class="information">\n                        <p>Vous avez obtenu ${this.pointage} sur 100 rupees!</p>\n                        <p>${this.questionsReussi} sur 3 questions de réussi!</p>\n                    </div>\n                    <div class="btnRecommencer">\n                        <a href="index.html" class="bouton">Recommencer le quiz</a>\n                    </div>\n                </div>\n            </div>`,t.closest("body").className="bg_resultats"}validerChoixReponseQ1(e){const t=e.currentTarget;let s=new Array;this.refArrChoixQ1.forEach(e=>{s.push(e.checked),e.disabled=!0}),-1==s.indexOf(!0)?this.afficherErreur(t):this.afficherRetroactionReponse(t,1,'<source srcset="assets/images/img_q1_rep_w200.png 1x, assets/images/img_q1_rep_w400.png 2x"><img src="assets/images/img_q1_rep_w200.png" alt="Image de Link avec son ocarina">')}validerChoixReponseQ2(e){const t=e.currentTarget;let s=new Array;this.refArrChoixQ2.forEach(e=>{s.push(e.checked),e.disabled=!0}),-1==s.indexOf(!0)?this.afficherErreur(t):this.afficherRetroactionReponse(t,2,'<source media="(min-width:601px)" srcset="assets/images/img_q2_rep_w322.png"><source media="(max-width:600px)" srcset="assets/images/img_q2_rep_w161.png 1x, assets/images/img_q2_rep_w322.png 2x"><img src="assets/images/img_q2_rep_w322.png" alt="Déesses du Triforce">')}validerChoixReponseQ3(e){const t=e.currentTarget;let s=new Array;this.refArrChoixQ3.forEach(e=>{s.push(e.checked),e.disabled=!0}),-1==s.indexOf(!0)?this.afficherErreur(t):this.afficherRetroactionReponse(t,3,'<source srcset="assets/images/img_q3_rep_w132.png 1x, assets/images/img_q3_rep_w264.png 2x"><img src="assets/images/img_q3_rep_w264.png" alt="Ooccoo et Ooccoo Jr.">')}afficherRetroactionReponse(e,t,s){const i=this.objJSONQuiz.bonnesReponses[t-1],r=e.closest("section").querySelector(".reponse"),n=e.closest(".choixReponses").querySelectorAll(".choix");let o="#7CC66C",c="positive",a=this.objJSONQuiz.pointsReponse[t-1];this.creerBouton(t,r),e.closest(".choixReponses").querySelector("[value="+i+"]").closest(".choix").querySelector(".label").style="border: 2px solid #7CC66C;",e.closest(".choixReponses").querySelector("[value="+i+"]").closest(".choix").classList.add("bonneReponse"),e.value!=i?(c="negative",o="#C03E3E",e.closest(".choix").querySelector(".label").style="border:2px solid #C03E3E;",e.closest(".choix").classList.add("mauvaiseReponse")):(this.questionsReussi+=1,this.pointage+=parseInt(a)),n.forEach(e=>{"bonneReponse"!=e.classList[1]&&"mauvaiseReponse"!=e.classList[1]&&e.querySelector(".hover").classList.add("slideOutUp")}),r.querySelector(".retroaction").innerHTML=this.objJSONQuiz.retroactions[c],e.value==i&&(r.querySelector(".retroaction").innerHTML+=` + ${a} rupees`),r.querySelector(".retroaction").style="text-shadow: 0 1px 3px rgba(0,0,0,0.3);",r.querySelector(".retroaction").style.color=o,r.querySelector(".imgReponse").innerHTML=s,r.querySelector(".explication").innerHTML=this.objJSONQuiz.explications["Q"+t],document.querySelector(".pointage").innerHTML=this.pointage.toString(),r.classList.add("slideInUpReponse")}creerBouton(e,t){const s=document.createElement("button");s.type="button",3==e?(s.classList.add("btn_soumettre","bouton"),s.innerHTML="Soumettre les résultats",t.appendChild(s).addEventListener("click",this.cliquerBoutonSoumettreMesChoix.bind(this))):(s.classList.add("btn_next","bouton"),s.innerHTML="Prochaine question",t.appendChild(s).addEventListener("click",this.cliquerBoutonProchaineQuestion.bind(this)))}afficherErreur(e){this.effacerErreur(e),e.closest("section").querySelector(".erreur").innerHTML='<span class="erreur__contenu">'+this.objJSONQuiz.messages.pasDeReponse+"</span>"}effacerErreur(e){e.closest("section").querySelector(".erreur").innerHTML=""}}});